{% extends "base.html" %}

{% block title %}Warehouses - Warehouse Management{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Warehouses</h1>
    {% if current_user.can_edit() %}
    <a href="{{ url_for('warehouses.create_warehouse') }}" class="btn btn-primary">Add Warehouse</a>
    {% endif %}
</div>

<div class="search-bar">
    <form method="GET" class="search-form">
        <input type="text" name="search" value="{{ search }}" placeholder="Search warehouses..." class="form-control">
        <button type="submit" class="btn btn-secondary">Search</button>
        {% if search %}
        <a href="{{ url_for('warehouses.list_warehouses') }}" class="btn btn-outline">Clear</a>
        {% endif %}
    </form>
</div>

{% if warehouses %}
<table class="table">
    <thead>
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Address</th>
            <th>Capacity</th>
            <th>Items</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for warehouse in warehouses %}
        <tr>
            <td><strong>{{ warehouse.code }}</strong></td>
            <td>{{ warehouse.name }}</td>
            <td>{{ warehouse.address or '-' }}</td>
            <td>{{ warehouse.capacity or '-' }}</td>
            <td>{{ warehouse.items.count() }}</td>
            <td>
                <a href="{{ url_for('warehouses.view_warehouse', warehouse_id=warehouse.id) }}" class="btn btn-small">View</a>
                {% if current_user.can_edit() %}
                <a href="{{ url_for('warehouses.edit_warehouse', warehouse_id=warehouse.id) }}" class="btn btn-small btn-secondary">Edit</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="empty-state">
    {% if search %}
    No warehouses found matching "{{ search }}". <a href="{{ url_for('warehouses.list_warehouses') }}">Clear search</a>
    {% else %}
    No warehouses yet. {% if current_user.can_edit() %}<a href="{{ url_for('warehouses.create_warehouse') }}">Create one</a>{% endif %}
    {% endif %}
</p>
{% endif %}
{% endblock %}
